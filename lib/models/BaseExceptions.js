"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const _ = require("lodash");
const BaseHttpStatusCode_1 = require("../config/BaseHttpStatusCode");
class BaseExceptions extends Error {
    constructor(status, msg) {
        super();
        this._TType = this.setType();
        if (msg instanceof BaseExceptions) {
            throw msg;
        }
        // gama-orm的底層錯誤處理
        if (!_.isUndefined(msg) && msg.name === 'RequestError') {
            msg = msg.message;
        }
        this.status = status;
        this.name = status ? status.toString() : '';
        this.message = msg ? { message: msg } : {
            message: _.isEmpty(BaseHttpStatusCode_1.BaseHttpStatusCode[status]) ?
                this._TType[status] :
                BaseHttpStatusCode_1.BaseHttpStatusCode[status]
        };
    }
}
exports.default = BaseExceptions;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQmFzZUV4Y2VwdGlvbnMuanMiLCJzb3VyY2VSb290IjoiLi9zcmMvIiwic291cmNlcyI6WyJtb2RlbHMvQmFzZUV4Y2VwdGlvbnMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSw0QkFBNEI7QUFDNUIscUVBQWtFO0FBRWxFLE1BQThCLGNBQWtCLFNBQVEsS0FBSztJQUt6RCxZQUFZLE1BQThCLEVBQUUsR0FBa0I7UUFDMUQsS0FBSyxFQUFFLENBQUM7UUFISixXQUFNLEdBQVEsSUFBSSxDQUFDLE9BQU8sRUFBRSxDQUFDO1FBSWpDLElBQUksR0FBRyxZQUFZLGNBQWMsRUFBRTtZQUMvQixNQUFNLEdBQUcsQ0FBQztTQUNiO1FBQ0Qsa0JBQWtCO1FBQ2xCLElBQUksQ0FBQyxDQUFDLENBQUMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxJQUFJLEdBQUcsQ0FBQyxJQUFJLEtBQUssY0FBYyxFQUFFO1lBQ3BELEdBQUcsR0FBRyxHQUFHLENBQUMsT0FBTyxDQUFDO1NBQ3JCO1FBQ0QsSUFBSSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUM7UUFDckIsSUFBSSxDQUFDLElBQUksR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO1FBQzVDLElBQUksQ0FBQyxPQUFPLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLE9BQU8sRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUM7WUFDcEMsT0FBTyxFQUFFLENBQUMsQ0FBQyxPQUFPLENBQUMsdUNBQWtCLENBQUMsTUFBZ0IsQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDdEQsSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFnQixDQUFDLENBQUMsQ0FBQztnQkFDL0IsdUNBQWtCLENBQUMsTUFBZ0IsQ0FBQztTQUMzQyxDQUFDO0lBQ04sQ0FBQztDQUdKO0FBeEJELGlDQXdCQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIF8gZnJvbSAnbG9kYXNoJztcbmltcG9ydCB7IEJhc2VIdHRwU3RhdHVzQ29kZSB9IGZyb20gJy4uL2NvbmZpZy9CYXNlSHR0cFN0YXR1c0NvZGUnO1xuXG5leHBvcnQgZGVmYXVsdCBhYnN0cmFjdCBjbGFzcyBCYXNlRXhjZXB0aW9uczxUPiBleHRlbmRzIEVycm9yIHtcbiAgICBwdWJsaWMgc3RhdHVzOiBCYXNlSHR0cFN0YXR1c0NvZGUgfCBUO1xuICAgIHB1YmxpYyBtZXNzYWdlOiBhbnk7XG4gICAgcHJpdmF0ZSBfVFR5cGU6IGFueSA9IHRoaXMuc2V0VHlwZSgpO1xuXG4gICAgY29uc3RydWN0b3Ioc3RhdHVzOiBCYXNlSHR0cFN0YXR1c0NvZGUgfCBULCBtc2c/OiBzdHJpbmcgfCBhbnkpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgaWYgKG1zZyBpbnN0YW5jZW9mIEJhc2VFeGNlcHRpb25zKSB7XG4gICAgICAgICAgICB0aHJvdyBtc2c7XG4gICAgICAgIH1cbiAgICAgICAgLy8gZ2FtYS1vcm3nmoTlupXlsaTpjK/oqqTomZXnkIZcbiAgICAgICAgaWYgKCFfLmlzVW5kZWZpbmVkKG1zZykgJiYgbXNnLm5hbWUgPT09ICdSZXF1ZXN0RXJyb3InKSB7XG4gICAgICAgICAgICBtc2cgPSBtc2cubWVzc2FnZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnN0YXR1cyA9IHN0YXR1cztcbiAgICAgICAgdGhpcy5uYW1lID0gc3RhdHVzID8gc3RhdHVzLnRvU3RyaW5nKCkgOiAnJztcbiAgICAgICAgdGhpcy5tZXNzYWdlID0gbXNnID8geyBtZXNzYWdlOiBtc2cgfSA6IHtcbiAgICAgICAgICAgIG1lc3NhZ2U6IF8uaXNFbXB0eShCYXNlSHR0cFN0YXR1c0NvZGVbc3RhdHVzIGFzIG51bWJlcl0pID9cbiAgICAgICAgICAgICAgICB0aGlzLl9UVHlwZVtzdGF0dXMgYXMgbnVtYmVyXSA6XG4gICAgICAgICAgICAgICAgQmFzZUh0dHBTdGF0dXNDb2RlW3N0YXR1cyBhcyBudW1iZXJdXG4gICAgICAgIH07XG4gICAgfVxuICAgIHByb3RlY3RlZCBhYnN0cmFjdCBzZXRUeXBlKCk6IFQ7XG5cbn1cbiJdfQ==